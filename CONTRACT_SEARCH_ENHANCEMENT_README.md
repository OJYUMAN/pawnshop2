# การปรับปรุงการค้นหาสัญญาให้แสดงข้อมูลครบถ้วน

## ปัญหาที่เกิดขึ้น
เมื่อค้นหาสัญญา ระบบแสดงเฉพาะข้อมูลพื้นฐานในตาราง แต่ไม่ได้แสดงข้อมูลทั้งหมดที่เคยใส่ไว้ในฟอร์มกลับมา

## การปรับปรุงที่ดำเนินการ

### 1. ปรับปรุงฟังก์ชัน `load_contract_data`
- เพิ่มการโหลดข้อมูลสัญญาเพิ่มเติม: ยอดจำนำ, อัตราดอกเบี้ย, ค่าธรรมเนียม, ยอดรวม
- เพิ่มการโหลดวันที่เริ่มต้นและสิ้นสุด
- เพิ่มการโหลดจำนวนวัน
- เพิ่มการโหลดข้อมูลหัก ณ ที่จ่าย
- เพิ่มการอัปเดตสถานะสัญญา

### 2. ปรับปรุงฟังก์ชัน `display_contract_in_table`
- เพิ่มคอลัมน์ใหม่ให้ครบถ้วน (14 คอลัมน์)
- แสดงข้อมูล: เลขที่สัญญา, ชื่อลูกค้า, ชื่อสินค้า, ยอดจำนำ, อัตราดอกเบี้ย, ค่าธรรมเนียม
- แสดงข้อมูล: วันที่เริ่มต้น, วันที่สิ้นสุด, จำนวนวัน, ดอกเบี้ย, หัก ณ ที่จ่าย, ยอดรวม, สถานะ

### 3. ปรับปรุงการสร้างตาราง
- เพิ่มคอลัมน์จาก 8 เป็น 14 คอลัมน์
- ตั้งค่าความกว้างคอลัมน์ให้เหมาะสม
- เพิ่มหัวข้อคอลัมน์ที่ครบถ้วน

### 4. เพิ่มฟังก์ชัน `load_additional_contract_data`
- โหลดข้อมูลลูกค้าเพิ่มเติม: รหัสลูกค้า, ที่อยู่, เลขบัตรประชาชน, เบอร์โทร
- โหลดข้อมูลสินค้าเพิ่มเติม: แบรนด์, ขนาด, เลขประจำตัว, รายละเอียด
- แสดงรูปภาพสินค้า

### 5. เพิ่มฟังก์ชัน `get_contract_by_id`
- ดึงข้อมูลสัญญาตาม ID จากฐานข้อมูล
- รวมข้อมูลลูกค้าและสินค้าในคำสั่งเดียว

### 6. เพิ่มการเชื่อมต่อการคลิกในตาราง
- เมื่อคลิกในตารางจะโหลดข้อมูลสัญญานั้นในฟอร์ม
- อัปเดตข้อมูลลูกค้าและสินค้าอัตโนมัติ

## ข้อมูลที่แสดงในตาราง

| คอลัมน์ | คำอธิบาย |
|---------|----------|
| 1 | ลำดับ |
| 2 | เลขที่สัญญา |
| 3 | ชื่อลูกค้า |
| 4 | ชื่อสินค้า |
| 5 | ยอดจำนำ |
| 6 | อัตราดอกเบี้ย |
| 7 | ค่าธรรมเนียม |
| 8 | วันที่เริ่มต้น |
| 9 | วันที่สิ้นสุด |
| 10 | จำนวนวัน |
| 11 | ดอกเบี้ย |
| 12 | หัก ณ ที่จ่าย |
| 13 | ยอดรวม |
| 14 | สถานะ |

## วิธีการใช้งาน

### การค้นหาสัญญา
1. เลือกประเภทการค้นหา (เลขที่สัญญา, เลขบัตรประชาชน, ชื่อนามสกุล)
2. กรอกข้อมูลที่ต้องการค้นหา
3. คลิก "ค้นหา"
4. ระบบจะแสดงผลการค้นหาในตารางและโหลดข้อมูลสัญญาแรกในฟอร์ม

### การดูข้อมูลสัญญาในฟอร์ม
1. คลิกในแถวของตารางที่ต้องการดู
2. ระบบจะโหลดข้อมูลสัญญานั้นในฟอร์ม
3. ข้อมูลลูกค้าและสินค้าจะถูกโหลดอัตโนมัติ

### การล้างการค้นหา
1. คลิก "ล้างการค้นหา"
2. ระบบจะล้างข้อมูลในตารางและฟอร์ม

## ประโยชน์ที่ได้รับ

1. **ข้อมูลครบถ้วน**: แสดงข้อมูลสัญญาทั้งหมดที่เคยใส่ไว้
2. **การใช้งานง่าย**: คลิกในตารางเพื่อดูข้อมูลในฟอร์ม
3. **ประสิทธิภาพ**: โหลดข้อมูลลูกค้าและสินค้าพร้อมกัน
4. **ความแม่นยำ**: แสดงข้อมูลที่ถูกต้องและครบถ้วน
5. **การจัดการ**: สามารถดูและแก้ไขข้อมูลสัญญาได้ง่าย

## หมายเหตุ
- ข้อมูลที่แสดงในตารางจะถูกคำนวณใหม่ทุกครั้ง
- การคลิกในตารางจะโหลดข้อมูลสัญญานั้นในฟอร์มทันที
- ข้อมูลลูกค้าและสินค้าจะถูกโหลดอัตโนมัติเมื่อเลือกสัญญา
